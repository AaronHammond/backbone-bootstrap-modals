<!DOCTYPE html>

<html>
<head>
  <title>backbone-bootstrap-modals.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>backbone-bootstrap-modals.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/*!
  backbone-bootstrap-modals 0.1.0
  Licensed under the MIT license.
*/</span>

(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(root)</span> {</span>
<span class="hljs-pi">
"use strict"</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>Create Project Namespace</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> BackboneBootstrapModals = {};</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <h2 id="basemodal">BaseModal</h2>

            </div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>The base class all other modals extend.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
BackboneBootstrapModals.BaseModal = Backbone.View.extend({
  className: <span class="hljs-string">'modal'</span>,
  attributes: {
    <span class="hljs-string">'tabindex'</span>: <span class="hljs-string">'-1'</span>,
    <span class="hljs-string">'role'</span>: <span class="hljs-string">'dialog'</span>,
    <span class="hljs-string">'aria-labelledby'</span>: <span class="hljs-string">'myModalLabel'</span>
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>Register Handlers for Bootstrap Modal Events: <a href="http://getbootstrap.com/javascript/#modals">http://getbootstrap.com/javascript/#modals</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  events: {
    <span class="hljs-string">'show.bs.modal'</span>: <span class="hljs-string">'onShowBsModal'</span>,
    <span class="hljs-string">'shown.bs.modal'</span>: <span class="hljs-string">'onShownBsModal'</span>,
    <span class="hljs-string">'hide.bs.modal'</span>: <span class="hljs-string">'onHideBsModal'</span>,
    <span class="hljs-string">'hidden.bs.modal'</span>: <span class="hljs-string">'onHiddenBsModal'</span>
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>The modal options that will be used if none are passed as options to the constructor</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  defaultModalOptions: {
    backdrop: <span class="hljs-literal">true</span>,
    keyboard: <span class="hljs-literal">true</span>
  },

  initialize: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(opts)</span> {</span>
    <span class="hljs-keyword">var</span> options = opts || {};
    <span class="hljs-keyword">this</span>.initializeSubViews(options);
    <span class="hljs-keyword">this</span>.modalOptions = _.extend({}, <span class="hljs-keyword">this</span>.defaultModalOptions, options.modalOptions);
    <span class="hljs-keyword">this</span>.shown = <span class="hljs-literal">false</span>;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>Initialize views for header, body, and footer sections.
All sub views should respect Bootstrap markup guidelines.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  initializeSubViews: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(options)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>Initialize headerView</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>.initializeSubView(
      <span class="hljs-string">'headerViewInstance'</span>,
      <span class="hljs-string">'headerView'</span>,
      <span class="hljs-string">'headerViewOptions'</span>,
      BackboneBootstrapModals.BaseHeaderView,
      options);</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>Initialize bodyView</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>.initializeSubView(
      <span class="hljs-string">'bodyViewInstance'</span>,
      <span class="hljs-string">'bodyView'</span>,
      <span class="hljs-string">'bodyViewOptions'</span>,
      BackboneBootstrapModals.BaseBodyView,
      options);</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>Initialize footerView</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>.initializeSubView(
      <span class="hljs-string">'footerViewInstance'</span>,
      <span class="hljs-string">'footerView'</span>,
      <span class="hljs-string">'footerViewOptions'</span>,
      BackboneBootstrapModals.BaseFooterView,
      options);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>Default to using viewKey and viewOptionsKey already present on the view.
Otherwise, check to see if values were passed through options.
If no options specified, use default views for basic functionality.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  initializeSubView: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(instanceKey, viewKey, viewOptionsKey, defaultView, options)</span> {</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>[viewOptionsKey]) {
      <span class="hljs-keyword">this</span>[viewOptionsKey] = options[viewOptionsKey];
    }
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>[viewKey]) {
      <span class="hljs-keyword">if</span> (options[viewKey]) {
        <span class="hljs-keyword">this</span>[viewKey] = options[viewKey];
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">this</span>[viewKey] = defaultView;
      }
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>Call the specified view constructor with the specified options</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>[instanceKey] = <span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>[viewKey](<span class="hljs-keyword">this</span>[viewOptionsKey]);
  },

  render: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">this</span>.$el.html([
      <span class="hljs-string">'&lt;div class="modal-dialog"&gt;'</span>,
      <span class="hljs-string">'&lt;div class="modal-content"&gt;'</span>,
      <span class="hljs-string">'&lt;/div&gt;'</span>,
      <span class="hljs-string">'&lt;/div&gt;'</span>
    ].join(<span class="hljs-string">''</span>));

    <span class="hljs-keyword">var</span> $modalContent = <span class="hljs-keyword">this</span>.$el.find(<span class="hljs-string">'.modal-content'</span>);

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.headerView) {
      $modalContent.append(<span class="hljs-keyword">this</span>.headerViewInstance.render().$el);
    }

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.bodyView) {
      $modalContent.append(<span class="hljs-keyword">this</span>.bodyViewInstance.render().$el);
    }

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.footerView) {
      $modalContent.append(<span class="hljs-keyword">this</span>.footerViewInstance.render().$el);
    }

    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.shown &amp;&amp; <span class="hljs-keyword">this</span>.modalOptions.show !== <span class="hljs-literal">false</span>) {
        <span class="hljs-keyword">this</span>.$el.modal(<span class="hljs-keyword">this</span>.modalOptions);
        <span class="hljs-keyword">this</span>.shown = <span class="hljs-literal">true</span>;
    }

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },

  remove: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">this</span>.removeSubViews();
    <span class="hljs-keyword">return</span> Backbone.View.prototype.remove.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
  },

  removeSubViews: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.headerView) { <span class="hljs-keyword">this</span>.removeSubView(<span class="hljs-keyword">this</span>.headerViewInstance); }
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.bodyView) { <span class="hljs-keyword">this</span>.removeSubView(<span class="hljs-keyword">this</span>.bodyViewInstance);  }
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.footerView) { <span class="hljs-keyword">this</span>.removeSubView(<span class="hljs-keyword">this</span>.footerViewInstance);  }
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>Attempt to use Marionette’s close first, falling back to Backbone’s remove</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  removeSubView: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(viewInstance)</span> {</span>
    <span class="hljs-keyword">if</span> (Backbone.Marionette &amp;&amp; viewInstance.close) {
        viewInstance.close.apply(viewInstance);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (viewInstance.remove) {
        viewInstance.remove.apply(viewInstance);
    }
  },

  show: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">this</span>.$el.modal(<span class="hljs-string">'show'</span>);
  },

  hide: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">this</span>.$el.modal(<span class="hljs-string">'hide'</span>);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>This event fires immediately when the show instance method is called.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  onShowBsModal: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> {</span>
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>This event is fired when the modal has been made visible to the user (will wait for CSS transitions to complete). </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  onShownBsModal: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> {</span>
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>This event is fired immediately when the hide instance method has been called.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  onHideBsModal: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> {</span>
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>This event is fired when the modal has finished being hidden from the user (will wait for CSS transitions to complete).</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  onHiddenBsModal: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> {</span>
    <span class="hljs-keyword">this</span>.remove();
  },

});</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <h2 id="baseheaderview">BaseHeaderView</h2>

            </div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>A simple view representing the modal title and dismiss icon.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
BackboneBootstrapModals.BaseHeaderView = Backbone.View.extend({
  className: <span class="hljs-string">'modal-header'</span>,

  initialize: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(opts)</span> {</span>
    <span class="hljs-keyword">var</span> options = opts || {};
    <span class="hljs-keyword">this</span>.label = options.label || <span class="hljs-string">''</span>;
    <span class="hljs-keyword">this</span>.labelId = options.labelId || <span class="hljs-string">'myModalLabel'</span>;
    <span class="hljs-keyword">this</span>.showClose = (options.showClose !== <span class="hljs-literal">undefined</span>) ? options.showClose : <span class="hljs-literal">true</span>;
  },

  render: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">var</span> html = <span class="hljs-string">''</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.showClose) {
      html += <span class="hljs-string">'&lt;button type="button" class="close" data-dismiss="modal" aria-hidden="true"&gt;x&lt;/button&gt;'</span>;
    }
    html += <span class="hljs-string">'&lt;h4 id="'</span>+<span class="hljs-keyword">this</span>.labelId+<span class="hljs-string">'" class="modal-title"&gt;'</span>+<span class="hljs-keyword">this</span>.label+<span class="hljs-string">'&lt;/h4&gt;'</span>;
    <span class="hljs-keyword">this</span>.$el.html(html);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  }

});</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <h2 id="basebodyview">BaseBodyView</h2>

            </div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>A simple view representing a minimal modal body</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
BackboneBootstrapModals.BaseBodyView = Backbone.View.extend({
  className: <span class="hljs-string">'modal-body'</span>,

  initialize: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(opts)</span> {</span>
    <span class="hljs-keyword">var</span> options = opts || {};
    <span class="hljs-keyword">this</span>.text = options.text;
  },

  render: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">var</span> html = <span class="hljs-string">""</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.text) {
      html += <span class="hljs-string">'&lt;p&gt;'</span>+<span class="hljs-keyword">this</span>.text+<span class="hljs-string">'&lt;/p&gt;'</span>;
    }
    <span class="hljs-keyword">this</span>.$el.html(html);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  }

});</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <h2 id="basefooterview">BaseFooterView</h2>

            </div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>A simple view representing a set of modal action buttons</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
BackboneBootstrapModals.BaseFooterView = Backbone.View.extend({
  className: <span class="hljs-string">'modal-footer'</span>,

  initialize: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(opts)</span> {</span>
    <span class="hljs-keyword">var</span> options = opts || {};
    <span class="hljs-keyword">this</span>.buttons = options.buttons || [];
  },

  render: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createButton</span><span class="hljs-params">(button)</span> {</span>
      <span class="hljs-keyword">var</span> attrs = button.attributes || {},
          attributes = <span class="hljs-built_in">Object</span>.keys(attrs).map(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(key)</span> {</span>
            <span class="hljs-keyword">return</span> key+<span class="hljs-string">'="'</span>+attrs[key]+<span class="hljs-string">'"'</span>;
          }).join(<span class="hljs-string">' '</span>);

      <span class="hljs-keyword">var</span> btn = <span class="hljs-string">'&lt;button'</span>;
      <span class="hljs-keyword">if</span> (button.id) { btn += <span class="hljs-string">' id="'</span>+button.id+<span class="hljs-string">'"'</span>; }
      <span class="hljs-keyword">if</span> (button.className) { btn += <span class="hljs-string">' class="'</span>+button.className+<span class="hljs-string">'"'</span>; }
      <span class="hljs-keyword">if</span> (attributes) { btn += attributes ;}
      btn += <span class="hljs-string">'&gt;'</span>;
      <span class="hljs-keyword">if</span> (button.value) { btn += button.value; }
      btn += <span class="hljs-string">'&lt;/button&gt;'</span>;
      <span class="hljs-keyword">return</span> btn;
    }

    <span class="hljs-keyword">var</span> html = <span class="hljs-keyword">this</span>.buttons.map(createButton).join(<span class="hljs-string">''</span>);
    <span class="hljs-keyword">this</span>.$el.html(html);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  }

});</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <h2 id="confirmationmodal">ConfirmationModal</h2>

            </div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>A simple modal for simple confirmation dialogs</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
BackboneBootstrapModals.ConfirmationModal = BackboneBootstrapModals.BaseModal.extend({

  events: {
    <span class="hljs-string">'click #confirmation-cancel-btn'</span>: <span class="hljs-string">'onClickCancel'</span>,
    <span class="hljs-string">'click #confirmation-confirm-btn'</span>: <span class="hljs-string">'onClickConfirm'</span>
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>Default set of BaseModal options for use as ConfirmationModal</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  defaultOptions: {
    headerViewOptions: {
        label: <span class="hljs-literal">undefined</span>,
        labelId: <span class="hljs-string">'myModalLabel'</span>,
        showClose: <span class="hljs-literal">true</span>,
      },
      bodyViewOptions: {
        text: <span class="hljs-literal">undefined</span>
      },
      footerViewOptions: {
        buttons: [
          { id: <span class="hljs-string">'confirmation-cancel-btn'</span>, className: <span class="hljs-string">'btn btn-default'</span>, value: <span class="hljs-string">'Cancel'</span>, attributes: { <span class="hljs-string">'data-dismiss'</span>: <span class="hljs-string">'modal'</span>, <span class="hljs-string">'aria-hidden'</span>: <span class="hljs-string">'true'</span> }},
          { id: <span class="hljs-string">'confirmation-confirm-btn'</span>,className: <span class="hljs-string">'btn btn-primary'</span>, value: <span class="hljs-string">'Confirm'</span> }
        ]
      }
  },

  initialize: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(opts)</span> {</span>
    <span class="hljs-keyword">var</span> options = _.extend({}, <span class="hljs-keyword">this</span>.defaultOptions, opts);
    <span class="hljs-keyword">if</span> (options.headerViewOptions &amp;&amp; options.label) {
        options.headerViewOptions.label = options.label;
    }
    <span class="hljs-keyword">if</span> (options.bodyViewOptions &amp;&amp; options.text) {
        options.bodyViewOptions.text = options.text;
    }

    <span class="hljs-keyword">this</span>.onCancel = options.onCancel;
    <span class="hljs-keyword">this</span>.onConfirm = options.onConfirm;
    BackboneBootstrapModals.BaseModal.prototype.initialize.call(<span class="hljs-keyword">this</span>, options);
  },

  onClickCancel: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> {</span>
    e.preventDefault();
    e.currentTarget.disabled = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">this</span>.executeCallbackAndHide(<span class="hljs-keyword">this</span>.onConfirm);
  },

  onClickConfirm: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> {</span>
    e.preventDefault();
    e.currentTarget.disabled = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">this</span>.executeCallbackAndHide(<span class="hljs-keyword">this</span>.onConfirm);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>Execute the specified callback if it exists, then hide the modal.
The modal will not be hidden if the callback returns false.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  executeCallbackAndHide: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(callback)</span> {</span>
    <span class="hljs-keyword">if</span> (callback) {
        <span class="hljs-keyword">if</span> (callback.call() !== <span class="hljs-literal">false</span>) {
            <span class="hljs-keyword">this</span>.hide();
        }
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">this</span>.hide();
    }
  }
});</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <h2 id="wizardmodal">WizardModal</h2>

            </div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>A simple modal for dialogs with multi-step wizard behavior</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
BackboneBootstrapModals.WizardModal = BackboneBootstrapModals.BaseModal.extend({

  events: {
    <span class="hljs-string">'click #confirmation-previous-btn'</span>: <span class="hljs-string">'onClickPrevious'</span>,
    <span class="hljs-string">'click #confirmation-next-btn'</span>: <span class="hljs-string">'onClickNext'</span>
  },

  initialize: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(opts)</span> {</span>
    <span class="hljs-keyword">this</span>.initializeSteps(opts);
    <span class="hljs-keyword">this</span>.setCurrentStep(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">var</span> options = <span class="hljs-keyword">this</span>.getOptionsForCurrentStep();
    options.modalOptions = _.extend({}, <span class="hljs-keyword">this</span>.defaultModalOptions, opts.modalOptions);
    BackboneBootstrapModals.BaseModal.prototype.initialize.call(<span class="hljs-keyword">this</span>, options);
  },

  initializeSteps: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(opts)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>if the steps structure is not already present, look in options</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.steps) {
      <span class="hljs-keyword">this</span>.steps = opts.steps;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>Validate the steps structure</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (!opts.steps || !_.isArray(opts.steps) || !opts.steps.length) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"steps array must be specified and non-empty"</span>);
    }
  },

  setCurrentStep: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(index)</span> {</span>
    <span class="hljs-keyword">this</span>.currentStepIndex = index;
    <span class="hljs-keyword">this</span>.currentStep = <span class="hljs-keyword">this</span>.steps[<span class="hljs-keyword">this</span>.currentStepIndex];
  },

  getPreviousStepIndex: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">var</span> prev = <span class="hljs-keyword">this</span>.currentStepIndex - <span class="hljs-number">1</span>;
    <span class="hljs-keyword">if</span> (prev &gt;= <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> prev;
    }
  },

  getNextStepIndex: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.currentStepIndex + <span class="hljs-number">1</span>;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>Return BaseModal options for the current step</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  getOptionsForCurrentStep: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">return</span> {
      headerViewOptions: {
        label: <span class="hljs-keyword">this</span>.currentStep.label,
        labelId: <span class="hljs-string">'myModalLabel'</span>,
        showClose: <span class="hljs-literal">true</span>,
      },
      bodyView: <span class="hljs-keyword">this</span>.currentStep.view,
      bodyViewOptions: <span class="hljs-keyword">this</span>.currentStep.viewOptions,
      footerViewOptions: {
        buttons: <span class="hljs-keyword">this</span>.getButtonsForCurrentStep()
      }
    };
  },

  getButtonsForCurrentStep: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">var</span> previousText = <span class="hljs-keyword">this</span>.currentStep.previousText || <span class="hljs-string">'Previous'</span>,
        nextText = <span class="hljs-keyword">this</span>.currentStep.nextText || <span class="hljs-string">'Next'</span>,
        previousStepIndex = <span class="hljs-keyword">this</span>.getPreviousStepIndex(),
        nextStepIndex = <span class="hljs-keyword">this</span>.getNextStepIndex(),
        buttons = [];
    <span class="hljs-keyword">if</span> (previousStepIndex) {
      buttons.push({ id: <span class="hljs-string">'confirmation-previous-btn'</span>,className: <span class="hljs-string">'btn btn-default'</span>, value: previousText });
    }
    <span class="hljs-keyword">if</span> (nextStepIndex) {
      buttons.push({ id: <span class="hljs-string">'confirmation-next-btn'</span>,className: <span class="hljs-string">'btn btn-primary'</span>, value: nextText });
    }
    <span class="hljs-keyword">return</span> buttons;
  },

  onClickPrevious: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> {</span>
    e.preventDefault();
    e.currentTarget.disabled = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">this</span>.setCurrentStep(<span class="hljs-keyword">this</span>.getPreviousStepIndex());
    <span class="hljs-keyword">this</span>.renderCurrentStep();
  },

  onClickNext: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span> {</span>
    e.preventDefault();
    e.currentTarget.disabled = <span class="hljs-literal">true</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>Execute the specified callback if it exists, then proceed.
The modal will not proceed if the callback returns false.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.onNext) {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.onNext.call() === <span class="hljs-literal">false</span>) {
            <span class="hljs-keyword">return</span>;
        }
    }

    <span class="hljs-keyword">var</span> nextStepIndex = <span class="hljs-keyword">this</span>.getNextStepIndex();
    <span class="hljs-keyword">if</span> (nextStepIndex &gt; <span class="hljs-keyword">this</span>.steps.length) {</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>If no more steps, hide the dialog</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">this</span>.hide();
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">this</span>.setCurrentStep(nextStepIndex);
      <span class="hljs-keyword">this</span>.renderCurrentStep();
    }
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>Remove Previous sub views and initialize sub views for the new step</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  renderCurrentStep: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">var</span> options = <span class="hljs-keyword">this</span>.getOptionsForCurrentStep();
    BackboneBootstrapModals.BaseModal.prototype.removeSubViews.call(<span class="hljs-keyword">this</span>);
    BackboneBootstrapModals.BaseModal.prototype.initializeSubViews.call(<span class="hljs-keyword">this</span>, options);
    <span class="hljs-keyword">this</span>.render();
  }
});

root.BackboneBootstrapModals = BackboneBootstrapModals;

}(<span class="hljs-keyword">this</span>));</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
